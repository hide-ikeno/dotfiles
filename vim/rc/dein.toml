# === Plugins (loaded on startup) ===

#------------------------------------------------------------------------------
# Plugin manager
#------------------------------------------------------------------------------
[[plugins]]
repo = 'Shougo/dein.vim'
hook_add = '''
  nnoremap <silent> <Space>up :<C-u>call dein#clear_state()<CR>:UpdateRemotePlugins<CR>
  nnoremap <silent> <Space>uP :<C-u>call dein#update()<CR>
'''

#------------------------------------------------------------------------------
# Functions and commands for Neovim GUI
#------------------------------------------------------------------------------
[[plugins]]
repo = 'equalsraf/neovim-gui-shim'
if = 'has("nvim")'

#------------------------------------------------------------------------------
# Remote Plugin Framework
#------------------------------------------------------------------------------
# for Vim 8
[[plugins]]
repo = 'roxma/vim-hug-neovim-rpc'
if = '!has("nvim")'

[[plugins]]
repo = 'https://github.com/roxma/nvim-yarp'

#------------------------------------------------------------------------------
# Fast matcher for CtrlP and Denite
#------------------------------------------------------------------------------
[[plugins]]
repo = 'nixprime/cpsm'
build = 'sh -c "PY3=ON ./install.sh"'

#------------------------------------------------------------------------------
# Utilities
#------------------------------------------------------------------------------
# Enable configuration file in each directory
[[plugins]]
repo = 'thinca/vim-localrc'

# Faster than the built-in 'matchparen' plugin
[[plugins]]
repo = 'itchyny/vim-parenmatch'

# [[plugins]]
# repo     = 'itchyny/vim-cursorword'
# hook_add = '''
#   augroup cursorword-filetype
#     autocmd!
#     autocmd FileType qf,denite,unite,vimfiler,quickrun,calendar let b:cursorword = 0
#     autocmd InsertEnter * let b:cursorword = 0
#     autocmd InsertLeave * let b:cursorword = 1
#   augroup END
# '''

# Powerful repeat '.'
[[plugins]]
repo = 'tpope/vim-repeat'
if = 'executable("editorconfig")'

# --- EditorConfig
[[plugins]]
repo = 'editorconfig/editorconfig-vim'
hook_add = '''
  let g:EditorConfig_exclude_patterns = ['fugitive://.*', 'scp://.*']
'''

#------------------------------------------------------------------------------
# Lightline + Colorscheme
#------------------------------------------------------------------------------
# Custom status line
[[plugins]]
repo = 'itchyny/lightline.vim'

# Add filetype glyphs (icons) to other plugins
[[plugins]]
repo = 'ryanoasis/vim-devicons'

# Create tmux powerline theme from vim powerline theme
# (requires powerline/vim-airline/lightline)
[[plugins]]
repo = 'edkolev/tmuxline.vim'

#  Dracula
[[plugins]]
repo = 'dracula/vim'
name = 'dracula'

#  Iceberg -- with lightline colorscheme
[[plugins]]
repo = 'cocopon/iceberg.vim'

#  gruvbox -- truecolor support with lightline colorscheme
[[plugins]]
repo = 'morhetz/gruvbox'

#  tender -- truecolor support with lightline colorscheme
[[plugins]]
repo = 'jacoborus/tender.vim'

#  onedark -- truecolor support with lightline colorscheme
[[plugins]]
repo = 'joshdick/onedark.vim'

#  neodark -- truecolor support with lightline colorscheme
[[plugins]]
repo = 'KeitaNakamura/neodark.vim'

#------------------------------------------------------------------------------
# Vim help in Japanese
#------------------------------------------------------------------------------
[[plugins]]
repo = 'vim-jp/vimdoc-ja'
hook_add = 'set helplang=ja,en'

# Introduction of VIM script
[[plugins]]
repo = 'mattn/learn-vimscript'

#------------------------------------------------------------------------------
# Plugins for completion
#------------------------------------------------------------------------------
# --- Snippet definitions for neosnippet
[[plugins]]
repo = 'Shougo/neosnippet-snippets'

# --- Completion by `look` command for neocomplete/deoplete/ncm
[[plugins]]
repo = 'ujihisa/neco-look'
if = 'executable("look")'

# --- syntax source for neocomplete/deoplete/ncm
[[plugins]]
repo = 'Shougo/neco-syntax'

#------------------------------------------------------------------------------
# Leader guide
#------------------------------------------------------------------------------
[[plugins]]
repo = 'hecal3/vim-leader-guide'
hook_add = '''
  function! s:my_displayfunc()
    let g:leaderGuide#displayname =
          \ substitute(g:leaderGuide#displayname, '\c<cr>$', '', '')
    let g:leaderGuide#displayname =
          \ substitute(g:leaderGuide#displayname, '^<Plug>', '', '')
    let g:leaderGuide#displayname =
          \ substitute(g:leaderGuide#displayname, '^:\c<C-u>', ':', '')
  endfunction

  let g:leaderGuide_displayfunc = [function("s:my_displayfunc")]
  " register it with the guide:
  call leaderGuide#register_prefix_descriptions("<Space>", "g:lmap")
  call leaderGuide#register_prefix_descriptions(",", "g:llmap")

  nnoremap <silent> <Space>  :<C-u>LeaderGuide       '<Space>'<CR>
  vnoremap <silent> <Space>  :<C-u>LeaderGuideVisual '<Space>'<CR>
  map               <Space>.  <Plug>leaderguide-global
  map               <Space>,  <Plug>leaderguide-buffer
'''

# === No meaning lazy plugins ===

# --- Textobj extension
[[plugins]]
repo = 'kana/vim-textobj-user'

# --- Operator extension
[[plugins]]
repo = 'kana/vim-operator-user'

# --- Find fenced code blocks and filetype
#     (e.g., Javascript blocks inside HTML)
[[plugins]]
repo = 'Shougo/context_filetype.vim'

# --- C++
[[plugins]]
repo = 'octol/vim-cpp-enhanced-highlight'

# --- Python
[[plugins]]
repo = 'vim-python/python-syntax'

[[plugins]]
# extend % and g% for python
repo = 'vim-scripts/python_match.vim'
hook_add = '''
  nmap <buffer> {{ [%
  nmap <buffer> }} ]%
'''

# --- diff
[[plugins]]
repo = 'thinca/vim-ft-diff_fold'

# --- help
[[plugins]]
repo = 'thinca/vim-ft-help_fold'

# --- CSS
[[plugins]]
repo = 'hail2u/vim-css3-syntax'

# --- JSON
[[plugins]]
repo = 'elzr/vim-json'

# --- YAML
[[plugins]]
repo = 'stephpy/vim-yaml'

# --- TOML
[[plugins]]
repo = 'cespare/vim-toml'

# --- Docker files
[[plugins]]
repo = 'ekalinin/Dockerfile.vim'

# --- fish
[[plugins]]
repo = 'kballard/vim-fish'

# --- zsh
[[plugins]]
repo = 'chrisbra/vim-zsh'

# --- tmux
[[plugins]]
repo = 'tmux-plugins/vim-tmux'

# --- vim
[[plugins]]
repo = 'vim-jp/syntax-vim-ex'

